<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panier - Fortnite Shop</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="assets/favicnon.png">
    <link rel="apple-touch-icon" href="assets/favicnon.png">
    
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@400;600;700&family=Orbitron:wght@400;700;900&family=Poppins:wght@400;600;700;800&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Animated Background -->
    <div class="animated-bg">
        <div class="gradient-orb orb-1"></div>
        <div class="gradient-orb orb-2"></div>
        <div class="gradient-orb orb-3"></div>
    </div>

    <!-- Navigation -->
    <nav class="navbar">
        <div class="container">
            <button class="hamburger-menu" id="hamburgerMenu" aria-label="Menu">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <div class="nav-brand">
                <a href="index.html">
                    <span class="logo-text">FortniteItems</span>
                    <span class="logo-subtext">SHOP</span>
                </a>
            </div>
            <div class="nav-links" id="navLinks">
                <a href="index.html#home">Accueil</a>
                <a href="index.html#products">Produits</a>
                <a href="index.html#features">Avantages</a>
                <a href="index.html#faq">FAQ</a>
            </div>
            <div class="nav-cart">
                <a href="cart.html" class="cart-button active">
                    <span class="cart-icon">üõí</span>
                    <span class="cart-count" id="cartCount">0</span>
                </a>
            </div>
        </div>
    </nav>

    <!-- Cart Page -->
    <section class="cart-page">
        <div class="container">
            <h1 class="page-title">üõí Mon Panier</h1>
            
            <div class="cart-container">
                <!-- Cart Items -->
                <div class="cart-items-section">
                    <div id="cartItems" class="cart-items">
                        <!-- Items will be loaded here by JavaScript -->
                    </div>
                    
                    <div id="emptyCart" class="empty-cart" style="display: none;">
                        <div class="empty-cart-icon">üõí</div>
                        <h2>Ton panier est vide</h2>
                        <p>D√©couvre nos offres incroyables et commence √† shopper !</p>
                        <a href="index.html#products" class="cta-button">
                            <span>Voir les Produits</span>
                        </a>
                    </div>
                </div>

                <!-- Cart Summary -->
                <div class="cart-summary">
                    <h3>R√©sum√© de Commande</h3>
                    
                    <div class="summary-line">
                        <span>Sous-total</span>
                        <span id="subtotal">0 F</span>
                    </div>
                    
                    <div class="summary-line">
                        <span>Livraison</span>
                        <span class="free">15 - 45 min ‚ö°</span>
                    </div>
                    
                    <div class="summary-line total">
                        <span>Total</span>
                        <span id="total">0 F</span>
                    </div>
                    
                    <div class="promo-code">
                        <input type="text" id="promoInput" placeholder="Code promo">
                        <button id="applyPromo" class="apply-btn">Appliquer</button>
                    </div>
                    
                    <div id="promoSuccess" class="promo-success" style="display: none;">
                        <span class="promo-text">‚úÖ Code appliqu√© !</span>
                    </div>
                    
                    <button id="checkoutBtn" class="checkout-btn" disabled>
                        <span>Passer √† la Commande</span>
                    </button>
                    
                    <div class="secure-payment">
                        <span class="secure-icon">üîí</span>
                        <span>Paiement 100% S√©curis√©</span>
                    </div>
                    
                    <div class="payment-methods">
                        <span>üí≥</span>
                        <span>üì±</span>
                        <span>üí∞</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Checkout Modal -->
    <div id="checkoutModal" class="modal">
        <div class="modal-content checkout-modal">
            <span class="close-modal">&times;</span>
            
            <h2>Finaliser la Commande</h2>
            
            <div class="checkout-steps">
                <!-- Step 1: Account Info -->
                <div class="checkout-step active" id="step1">
                    <h3>üìß Informations de Livraison</h3>
                    
                    <!-- Message pour V-Bucks uniquement -->
                    <p id="vbucksMessage" style="margin-bottom: 20px; color: #aaa; font-size: 14px; display: none;">
                        ‚ÑπÔ∏è Tu recevras par email les identifiants d'un compte Epic Games contenant tes V-Bucks. 
                        Ajoute ce compte en ami, attends 48h, puis offre-toi ce que tu veux sur ton compte principal !
                    </p>
                    
                    <!-- Message pour Fortnite Crew -->
                    <p id="crewMessage" style="margin-bottom: 20px; color: #aaa; font-size: 14px; display: none;">
                        ‚ÑπÔ∏è Pour l'abonnement Fortnite Crew, nous avons besoin de tes identifiants Epic Games pour activer le Crew sur ton compte.
                    </p>
                    
                    <form id="accountForm">
                        <!-- Champs communs -->
                        <div class="form-group">
                            <label>Nom et Pr√©nom *</label>
                            <input type="text" id="fullName" required placeholder="Ex: Jean Dupont">
                        </div>
                        
                        <div class="form-group">
                            <label>Email de contact *</label>
                            <input type="email" id="contactEmail" required placeholder="email@exemple.com">
                            <small style="color: #888; font-size: 12px;" id="emailHint">Pour recevoir les identifiants du compte</small>
                        </div>
                        
                        <!-- Champs sp√©cifiques Fortnite Crew (masqu√©s par d√©faut) -->
                        <div id="crewFields" style="display: none;">
                            <div class="form-group">
                                <label>Pseudo Epic Games *</label>
                                <input type="text" id="epicUsername" placeholder="Ton pseudo sur Epic Games">
                            </div>
                            
                            <div class="form-group">
                                <label>Email de connexion Epic Games *</label>
                                <input type="email" id="epicLoginEmail" placeholder="Email de ton compte Epic">
                            </div>
                            
                            <div class="form-group">
                                <label>Num√©ro WhatsApp *</label>
                                <input type="tel" id="whatsappNumber" placeholder="+229 XX XX XX XX">
                                <small style="color: #888; font-size: 12px;">Pour confirmer l'activation</small>
                            </div>
                        </div>
                        
                        <!-- Champs V-Bucks uniquement -->
                        <div id="vbucksFields" style="display: block;">
                            <div class="form-group">
                                <label>Plateforme *</label>
                                <select id="platform" required>
                                    <option value="">S√©lectionne ta plateforme</option>
                                    <option value="xbox">Xbox (One, Series X/S)</option>
                                    <option value="ps">PlayStation (4, 5)</option>
                                    <option value="pc">PC (Epic Games)</option>
                                    <option value="switch">Nintendo Switch</option>
                                    <option value="mobile">Mobile (iOS/Android)</option>
                                </select>
                            </div>
                        </div>
                        
                        <button type="button" class="next-btn" id="step1NextBtn">Continuer</button>
                    </form>
                </div>
                    </form>
                </div>

                <!-- Step 2: Payment Method -->
                <div class="checkout-step" id="step2">
                    <h3>üí≥ M√©thode de Paiement</h3>
                    <div class="payment-options">
                        <div class="payment-option active" data-method="mobile">
                            <input type="radio" name="payment" id="payMobile" value="mobile" checked>
                            <label for="payMobile">
                                <span class="payment-icon">üì±</span>
                                <div>
                                    <strong>Mobile Money</strong>
                                    <small>Orange, MTN, Moov</small>
                                </div>
                            </label>
                        </div>
                        
                        <div class="payment-option" data-method="crypto">
                            <input type="radio" name="payment" id="payCrypto" value="crypto">
                            <label for="payCrypto">
                                <span class="payment-icon">‚Çø</span>
                                <div>
                                    <strong>Crypto</strong>
                                    <small>Bitcoin, USDT, Ethereum</small>
                                </div>
                            </label>
                        </div>
                    </div>
                    
                    <div class="checkout-actions">
                        <button type="button" class="back-btn" id="step2BackBtn">Retour</button>
                        <button type="button" class="next-btn" id="step2NextBtn">Payer Maintenant</button>
                    </div>
                </div>

                <!-- Step 3: Processing -->
                <div class="checkout-step" id="step3">
                    <div class="processing">
                        <div class="spinner"></div>
                        <h3>Initialisation du paiement s√©curis√©...</h3>
                        <p class="processing-status" id="processingStatus">
                            Connexion √† Lygos en cours (1-3 secondes)
                        </p>
                        <div class="processing-hint" id="processingHint">
                            <p>üîÑ Cela prend plus de temps que pr√©vu. Clique ci-dessous pour relancer l'ouverture de la page de paiement.</p>
                            <button type="button" class="retry-btn" onclick="retryPaymentRedirect()">Relancer le paiement</button>
                        </div>
                    </div>
                </div>

                <!-- Step 4: Success -->
                <div class="checkout-step" id="step4">
                    <div class="success-message">
                        <div class="success-icon">‚úÖ</div>
                        <h3>Commande R√©ussie !</h3>
                        <p>Tu vas recevoir les identifiants du compte par email sous 15-45 minutes.</p>
                        <div class="order-details">
                            <p><strong>Num√©ro de commande:</strong> #<span id="orderNumber"></span></p>
                            <p><strong>Email de confirmation envoy√© √†:</strong> <span id="confirmEmail"></span></p>
                        </div>
                        <a href="index.html" class="cta-button">Retour √† l'Accueil</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- WhatsApp Support Button (Floating) -->
    <a href="https://wa.me/22965623691?text=Bonjour,%20j'ai%20besoin%20d'aide%20avec%20ma%20commande" 
       class="whatsapp-float" 
       target="_blank"
       aria-label="Support WhatsApp">
        <svg viewBox="0 0 32 32" fill="currentColor" width="28" height="28">
            <path d="M16.002 0C7.164 0 0 7.164 0 16.002c0 2.827.736 5.482 2.023 7.787L.057 31.972l8.355-2.193c2.215 1.203 4.76 1.893 7.59 1.893 8.838 0 16.002-7.164 16.002-16.002S24.84 0 16.002 0zm9.388 22.594c-.392.976-1.943 1.794-2.827 1.91-.758.098-1.747.139-2.817-.176-1.066-.315-2.433-.732-4.197-1.432-7.368-2.926-12.17-10.336-12.54-10.814-.37-.478-3.02-4.016-3.02-7.66 0-3.644 1.91-5.433 2.588-6.168.678-.735 1.479-.92 1.972-.92.493 0 .986.004 1.418.026.455.022.987-.174 1.543 1.18.556 1.354 1.899 4.622 2.065 4.958.166.336.277.728.055 1.173-.222.445-.333.723-.666 1.113-.333.39-.699.87-1 1.173-.333.336-.678.698-.291 1.37.387.672 1.722 2.84 3.696 4.603 2.54 2.27 4.68 2.976 5.348 3.311.668.335 1.056.28 1.443-.166.387-.446 1.66-1.937 2.103-2.605.443-.668.887-.557 1.494-.335.607.222 3.851 1.816 4.519 2.15.668.335 1.112.502 1.279.777.167.276.167 1.602-.225 2.578z"/>
        </svg>
    </a>

    <script src="script.js"></script>
    <script src="cart.js"></script>
    <script src="checkout.js"></script>
</body>
</html>

